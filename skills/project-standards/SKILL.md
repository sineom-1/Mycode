---
name: project-standards
description: 在任何代码库中快速识别并遵循项目约定（目录、命名、构建、测试、发布等）
---

本 skill 的目标：在**不预设语言/框架**的前提下，快速找出目标项目的真实约定，并在后续修改中保持一致。

## 1) 先找“项目权威来源”

按优先级阅读（存在则优先）：

1. `AGENTS.md` / `CLAUDE.md` / `CONTRIBUTING.md` / `README.md`
2. `docs/`、架构图、ADR、规范文档
3. CI 配置（如 GitHub Actions / GitLab CI）与脚本（`Makefile`、`package.json`、`justfile` 等）
4. 格式化/静态检查配置（lint/formatter/typecheck）
5. 相似功能的现有实现（作为“事实标准”）

## 2) 识别并记录这些约定

最少要搞清楚：

- **目录与边界**：模块怎么分、跨层怎么调用、公共代码放哪
- **命名与风格**：文件/类型/函数/变量命名，错误码/异常结构
- **依赖与注入**：如何访问 DB/缓存/HTTP 客户端，如何写配置
- **测试与验证**：如何跑单测/集成测，哪些测试是必跑
- **发布与兼容**：API/数据结构变更的兼容策略，迁移/回滚方式

## 3) 改动时的基本规则

- **先复用后新增**：优先使用现有工具函数、抽象与模式
- **最小改动**：避免跨模块大重构；不顺手“顺便优化”
- **风格一致**：保持同一文件/目录下的风格一致
- **可验证**：每次变更都要给出可重复的验证步骤（命令/操作）

## 4) 输出要求（给人看得懂）

在结论/方案里明确写出：

- 你遵循了哪些项目约定（基于哪些文件/证据）
- 你做了哪些假设（如果必须），以及如何验证
- 你建议的验证命令与回归范围

## 5) 推荐开发流程（feature-dev）

对于新功能或中等以上变更，建议按 `/dev`（对齐官方 feature-dev）流程推进：

- Discovery → Exploration → Clarifying Questions → Architecture → Implementation → Quality Review → Summary
- 实现前必须获得用户明确批准；架构设计前必须把澄清问题问清楚并等待回答
- 调用 `explorer/architect` 后先读取其返回的关键文件，再继续后续阶段
