---
name: templates
description: 常用模板（需求澄清、设计文档、接口契约、测试计划、变更摘要与发布说明）
---

本 skill 提供可复用的最小模板。按需使用，避免大而全。

## 1) 需求澄清模板

```markdown
## 需求摘要
- 背景：...
- 目标：...
- 非目标：...

## 验收标准
- [ ] ...

## 关键澄清问题
1. ...
```

## 2) 设计文档模板（轻量）

```markdown
## 方案概述
- 我选择的方案：...
- 取舍：...

## 影响范围
- 影响模块：...
- 兼容性：...
- 迁移/回滚：...

## 组件与接口
- 组件A：职责... 对外接口...
- 组件B：职责... 对外接口...

## 实施步骤
- [ ] Step 1 ...
- [ ] Step 2 ...

## 验证计划
- 测试：...
- 回归：...
```

## 3) 接口契约模板（HTTP/事件/函数均可套用）

```markdown
## 接口：<name>

### 输入
| 字段 | 类型 | 必填 | 说明 |
|---|---|---:|---|
| ... | ... | ✅/❌ | ... |

### 输出
| 字段 | 类型 | 必填 | 说明 |
|---|---|---:|---|
| ... | ... | ✅/❌ | ... |

### 错误
| 错误码/类型 | 含义 | 可重试 | 处理建议 |
|---|---|---:|---|
| ... | ... | ✅/❌ | ... |
```

## 4) 测试计划模板

```markdown
## 测试目标
- 覆盖的行为：...

## 用例（最少但关键）
- ✅ 成功路径：...
- ❌ 失败路径：...
- 🔁 幂等/重试（如适用）：...
- 🔒 权限/安全（如适用）：...

## 回归范围
- 相关模块：...
- 相关接口/页面：...
```

## 5) 变更摘要模板（交付说明）

```markdown
## 变更摘要
- 做了什么：...
- 为什么：...
- 兼容性/迁移：...

## 修改文件
- `path/to/file.ext` - 说明

## 如何验证
- `...`
```

## 6) Codex / Gemini 调用参数模板（可选）

当需要使用 Codex/Gemini 获取原型/方案/Review 时，使用以下最小约束与参数模板：

- 建议用英文撰写 `PROMPT`（对模型更稳定），对用户沟通保持中文
- **原型阶段必须 `sandbox: "read-only"`**，并要求**只输出 unified diff patch**（不得直接写文件）
- 必须保存并复用 `SESSION_ID`（续对话传入同一个会话）
- 原型仅作参考：需按项目规范重写为生产级代码，不可直接照搬
- 原型质量不佳可要求重试，最多 2 次；仍不佳则自行实现并记录取舍

### Codex（后端实现 / Debug / Review）

```json
{
  "PROMPT": "需求 + 技术要求 + 仅输出 unified diff patch（或 Review 结论）",
  "cd": "/project/path",
  "sandbox": "read-only",
  "SESSION_ID": null
}
```

### Gemini（前端 / 需求澄清 / 原型）

```json
{
  "PROMPT": "用户原始需求（尽量原文转发）+ 仅输出 unified diff patch（或澄清问题/方案）",
  "SESSION_ID": null
}
```
